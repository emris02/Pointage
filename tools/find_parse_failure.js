const fs=require('fs'); const path=require('path'); const file=path.join(__dirname,'..','assets','js','admin.js'); const s=fs.readFileSync(file,'utf8').split(/\r?\n/); for(let i=1;i<=s.length;i++){const prefix=s.slice(0,i).join('\n'); try{ new Function(prefix); }catch(e){ console.log('Parse failed at line',i); console.log(e && e.message); console.log('Context:'); console.log(s.slice(Math.max(0,i-5),i+2).map((ln,idx)=>((i-5+idx)+1)+': '+ln).join('\n')); process.exit(0);} } console.log('All prefixes parse OK');