const fs=require('fs'); const s=fs.readFileSync('assets/js/admin.js','utf8'); const lines=s.split(/\r?\n/); let p=0, inS=false,inD=false,inB=false,esc=false; for(let i=0;i<lines.length;i++){const L=lines[i]; let changed=false; for(let j=0;j<L.length;j++){const ch=L[j]; if(esc){esc=false; continue;} if(ch==='\\'){esc=true; continue;} if(ch==="'" && !inD && !inB){ inS=!inS; continue;} if(ch==='"' && !inS && !inB){ inD=!inD; continue;} if(ch==='`' && !inS && !inD){ inB=!inB; continue;} if(inS||inD||inB) continue; if(ch==='('){ p++; changed=true; } else if(ch===')'){ p--; changed=true; } } if(changed) console.log((i+1)+': p='+p+'  '+L); } console.log('FINAL p='+p);